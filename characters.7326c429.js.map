{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAuBC,SAASC,cAAc,4BAC9CC,EAAuBF,SAASC,cAAc,4BAC9CE,EAAcH,SAASC,cAAc,kBACrCG,EAAUJ,SAASC,cAAc,YAEjCI,EAAYL,SAASC,cAAc,kCACnCK,EAAeN,SAASC,cAAc,8BAE5CE,EAAYI,MAAMC,QAAU,OAE5B,IAAIC,EAAQ,GACRC,EAAS,EA2Db,SAASC,EAAqBC,GAC1B,IAAMC,EAAaD,EAAIE,KAAI,SAAAC,GACvB,OAXR,SAAsBC,EAAWC,GAC7B,MAAO,6EAE8DC,OAAlDF,EAAUG,KAAO,IAAMH,EAAUI,UAAU,SACjDF,OADwDD,EAAK,sBACxDC,OAALD,EAAK,4B,CAOPI,CAD4BN,EAATC,UAAeD,EAAJE,K,IAEtCK,KAAK,IAERlB,EAAQmB,QAAS,EACjBxB,EAAqByB,mBAAmB,YAAaX,GACrDV,EAAYI,MAAMC,QAAU,O,CAhEhCN,EAAqBuB,iBAAiB,UAsBtC,SAA4BC,GACxBA,EAAEC,iBACF,IAAMV,EAAOZ,EAAUuB,MACjBC,EAAUvB,EAAasB,MAC7B,IAAKX,EACD,OAGJlB,EAAqB+B,UAAY,GACjC1B,EAAQmB,QAAS,EACjBd,EAAQ,IAER,EAAAZ,EAAAkC,uBAAsBd,EAAMY,EAASpB,EAAOC,GACvCsB,MAAK,SAAAC,GACF7B,EAAQmB,QAAS,EACZU,EAAOC,KAAKC,QAAQC,SACrBrC,EAAqB+B,UAAa,iGAItCnB,EAAqBsB,EAAOC,KAAKC,SACjChC,EAAYI,MAAMC,QAAU,M,IAE/B6B,OAAM,SAAAC,G,OAAOC,QAAQC,MAAMF,E,OA5CpCnC,EAAYsB,iBAAiB,SAU7B,WACIrB,EAAQmB,QAAS,EACjBb,GAAU,IAEV,EAAAb,EAAA4C,eAAchC,EAAOC,GAChBsB,MAAK,SAAAC,GAEF,OADAtB,EAAqBsB,EAAOC,KAAKC,SACnBzB,C,QAdtB,EAAAb,EAAA4C,eAAchC,EAAOC,GAChBsB,MAAK,SAAAC,GACFtB,EAAqBsB,EAAOC,KAAKC,Q,IAEpCE,OAAM,SAAAC,G,OAAOC,QAAQC,MAAMF,E","sources":["src/characters.js"],"sourcesContent":["import { getCharacters, getCharactersBySearch } from \"./getResource\";\n\nconst charactersFilterList = document.querySelector('.characters-filter__list');\nconst formCharactersFilter = document.querySelector('.characters-filter__form');\nconst btnLoadMore = document.querySelector('.btn-load-more');\nconst loading = document.querySelector('.loading');\n\nconst nameInput = document.querySelector('.characters-filter__input-name');\nconst searchSelect = document.querySelector('.characters-filter__select');\n\nbtnLoadMore.style.display = 'none';\n\nlet limit = 20;\nlet offset = 0;\n\nformCharactersFilter.addEventListener('submit', onSearchCharacters);\nbtnLoadMore.addEventListener('click', onLoadCharacters);\n\nfunction getCharactersList() {\n    getCharacters(limit, offset)\n        .then(result => {\n            createCharactersList(result.data.results);\n        })\n        .catch(err => console.error(err));\n}\n\nfunction onLoadCharacters() {\n    loading.hidden = false;\n    offset += 20;\n\n    getCharacters(limit, offset)\n        .then(result => {\n            createCharactersList(result.data.results);\n            return limit, offset;\n        })\n}\n\nfunction onSearchCharacters(e) {\n    e.preventDefault();\n    const name = nameInput.value;\n    const orderBy = searchSelect.value;\n    if (!name) {\n        return;\n    }\n\n    charactersFilterList.innerHTML = '';\n    loading.hidden = false;\n    limit = 50;\n\n    getCharactersBySearch(name, orderBy, limit, offset)\n        .then(result => {\n            loading.hidden = true;\n            if (!result.data.results.length) {\n                charactersFilterList.innerHTML = `\n                    <p class='no-data'>Sorry, no data for this query.</p>\n                `;\n            }\n            createCharactersList(result.data.results);\n            btnLoadMore.style.display = 'none';\n        })\n        .catch(err => console.error(err));\n}\n\nfunction createMarkup(thumbnail, name) {\n    return `\n        <li class=\"characters-filter__list-item\">\n            <img src=${thumbnail.path + '.' + thumbnail.extension} alt=${name}>\n            <p>${name}</p>\n        </li>\n    `;\n}\n\nfunction createCharactersList(arr) {\n    const characters = arr.map(({ thumbnail, name }) => {\n        return createMarkup(thumbnail, name);\n    }).join('');\n    \n    loading.hidden = true;\n    charactersFilterList.insertAdjacentHTML('beforeend', characters);\n    btnLoadMore.style.display = 'block';\n}\n\ngetCharactersList();"],"names":["$4qBpi","parcelRequire","$0c348f401b28ab16$var$charactersFilterList","document","querySelector","$0c348f401b28ab16$var$formCharactersFilter","$0c348f401b28ab16$var$btnLoadMore","$0c348f401b28ab16$var$loading","$0c348f401b28ab16$var$nameInput","$0c348f401b28ab16$var$searchSelect","style","display","$0c348f401b28ab16$var$limit","$0c348f401b28ab16$var$offset","$0c348f401b28ab16$var$createCharactersList","arr","characters","map","param","thumbnail","name","concat","path","extension","$0c348f401b28ab16$var$createMarkup","join","hidden","insertAdjacentHTML","addEventListener","e","preventDefault","value","orderBy","innerHTML","getCharactersBySearch","then","result","data","results","length","catch","err","console","error","getCharacters"],"version":3,"file":"characters.7326c429.js.map"}