{"mappings":"AAGAA,eAAeC,EAAcC,EAAOC,GAEhC,MAAMC,QAAgBC,MAAM,6DAA+BH,YAAgBC,6CAE3E,IAAKC,EAAQE,GACT,MAAM,IAAIC,MAAMH,EAAQI,QAG5B,OAAOJ,EAAQK,M,CAGnBT,eAAeU,EAAsBC,EAAMC,EAASV,EAAOC,GACvD,MAAMC,QAAgBC,MAAM,sEAAwCM,aAAgBC,WAAiBV,YAAgBC,6CAErH,IAAKC,EAAQE,GACT,MAAM,IAAIC,MAAMH,EAAQI,QAG5B,OAAOJ,EAAQK,M,CCnBnB,MAAMI,EAAuBC,SAASC,cAAc,4BAC9CC,EAAuBF,SAASC,cAAc,4BAC9CE,EAAcH,SAASC,cAAc,kBACrCG,EAAUJ,SAASC,cAAc,YAEjCI,EAAYL,SAASC,cAAc,kCACnCK,EAAeN,SAASC,cAAc,8BAE5CE,EAAYI,MAAMC,QAAU,OAE5B,IAAIC,EAAQ,GACRC,EAAS,EA2Db,SAASC,EAAqBC,GAC1B,MAAMC,EAAaD,EAAIE,KAAI,EAACC,UAAEA,EAASlB,KAAEA,KAV7C,SAAsBkB,EAAWlB,GAC7B,MAAO,6EAEYkB,EAAUC,KAAO,IAAMD,EAAUE,iBAAiBpB,sBACxDA,4B,CAOFqB,CAAaH,EAAWlB,KAChCsB,KAAK,IAERf,EAAQgB,QAAS,EACjBrB,EAAqBsB,mBAAmB,YAAaR,GACrDV,EAAYI,MAAMC,QAAU,O,CAhEhCN,EAAqBoB,iBAAiB,UAsBtC,SAA4BC,GACxBA,EAAEC,iBACF,MAAM3B,EAAOQ,EAAUoB,MACjB3B,EAAUQ,EAAamB,MAC7B,IAAK5B,EACD,OAGJE,EAAqB2B,UAAY,GACjCtB,EAAQgB,QAAS,EACjBX,EAAQ,GAERb,EAAsBC,EAAMC,EAASW,EAAOC,GACvCiB,MAAKC,IACFxB,EAAQgB,QAAS,EACZQ,EAAOC,KAAKC,QAAQC,SACrBhC,EAAqB2B,UAAY,iGAIrCf,EAAqBiB,EAAOC,KAAKC,SACjC3B,EAAYI,MAAMC,QAAU,MAAM,IAErCwB,OAAMC,GAAOC,QAAQC,MAAMF,I,IA5CpC9B,EAAYmB,iBAAiB,SAU7B,WACIlB,EAAQgB,QAAS,EACjBV,GAAU,GAEVvB,EAAcsB,EAAOC,GAChBiB,MAAKC,IACFjB,EAAqBiB,EAAOC,KAAKC,SACnBpB,I,IAdtBvB,EAAcsB,EAAOC,GAChBiB,MAAKC,IACFjB,EAAqBiB,EAAOC,KAAKC,QAAQ,IAE5CE,OAAMC,GAAOC,QAAQC,MAAMF","sources":["src/getResource.js","src/characters.js"],"sourcesContent":["const BASE_URL = 'https://gateway.marvel.com:443/v1/public/';\nconst API_PUBLIC_KEY = 'a85ca2e1a3f06b7ee3183f960e5fdc88';\n\nasync function getCharacters(limit, offset) {\n\n    const request = await fetch(`${BASE_URL}characters?limit=${limit}&offset=${offset}&apikey=${API_PUBLIC_KEY}`);\n    \n    if (!request.ok) {\n        throw new Error(request.status);\n    }\n\n    return request.json();\n}\n\nasync function getCharactersBySearch(name, orderBy, limit, offset) {\n    const request = await fetch(`${BASE_URL}characters?nameStartsWith=${name}&orderBy=${orderBy}&limit=${limit}&offset=${offset}&apikey=${API_PUBLIC_KEY}`);\n    \n    if (!request.ok) {\n        throw new Error(request.status);\n    }\n\n    return request.json();\n}\n\nasync function getComics(limit, offset) {\n    const request = await fetch(`${BASE_URL}comics?limit=${limit}&offset=${offset}&apikey=${API_PUBLIC_KEY}`);\n    \n    if (!request.ok) {\n        throw new Error(request.status);\n    }\n\n    return request.json();\n}\n\nasync function getComicsBySearch(title, format, orderBy, limit, offset) {\n    const request = await fetch(`https://gateway.marvel.com:443/v1/public/comics?format=${format}&titleStartsWith=${title}&orderBy=${orderBy}&limit=${limit}&offset=${offset}&apikey=${API_PUBLIC_KEY}`);\n\n    if (!request.ok) {\n        throw new Error(request.status, request.statusText);\n    }\n\n    return request.json();\n}\n\nexport {getCharacters, getCharactersBySearch, getComics, getComicsBySearch};","import { getCharacters, getCharactersBySearch } from \"./getResource\";\n\nconst charactersFilterList = document.querySelector('.characters-filter__list');\nconst formCharactersFilter = document.querySelector('.characters-filter__form');\nconst btnLoadMore = document.querySelector('.btn-load-more');\nconst loading = document.querySelector('.loading');\n\nconst nameInput = document.querySelector('.characters-filter__input-name');\nconst searchSelect = document.querySelector('.characters-filter__select');\n\nbtnLoadMore.style.display = 'none';\n\nlet limit = 20;\nlet offset = 0;\n\nformCharactersFilter.addEventListener('submit', onSearchCharacters);\nbtnLoadMore.addEventListener('click', onLoadCharacters);\n\nfunction getCharactersList() {\n    getCharacters(limit, offset)\n        .then(result => {\n            createCharactersList(result.data.results);\n        })\n        .catch(err => console.error(err));\n}\n\nfunction onLoadCharacters() {\n    loading.hidden = false;\n    offset += 20;\n\n    getCharacters(limit, offset)\n        .then(result => {\n            createCharactersList(result.data.results);\n            return limit, offset;\n        })\n}\n\nfunction onSearchCharacters(e) {\n    e.preventDefault();\n    const name = nameInput.value;\n    const orderBy = searchSelect.value;\n    if (!name) {\n        return;\n    }\n\n    charactersFilterList.innerHTML = '';\n    loading.hidden = false;\n    limit = 50;\n\n    getCharactersBySearch(name, orderBy, limit, offset)\n        .then(result => {\n            loading.hidden = true;\n            if (!result.data.results.length) {\n                charactersFilterList.innerHTML = `\n                    <p class='no-data'>Sorry, no data for this query.</p>\n                `;\n            }\n            createCharactersList(result.data.results);\n            btnLoadMore.style.display = 'none';\n        })\n        .catch(err => console.error(err));\n}\n\nfunction createMarkup(thumbnail, name) {\n    return `\n        <li class=\"characters-filter__list-item\">\n            <img src=${thumbnail.path + '.' + thumbnail.extension} alt=${name}>\n            <p>${name}</p>\n        </li>\n    `;\n}\n\nfunction createCharactersList(arr) {\n    const characters = arr.map(({ thumbnail, name }) => {\n        return createMarkup(thumbnail, name);\n    }).join('');\n    \n    loading.hidden = true;\n    charactersFilterList.insertAdjacentHTML('beforeend', characters);\n    btnLoadMore.style.display = 'block';\n}\n\ngetCharactersList();"],"names":["async","$88749f7ae1b7386d$export$1a274d8250f0d7c4","limit","offset","request","fetch","ok","Error","status","json","$88749f7ae1b7386d$export$870c82aa150815ac","name","orderBy","$7483d875cc46523c$var$charactersFilterList","document","querySelector","$7483d875cc46523c$var$formCharactersFilter","$7483d875cc46523c$var$btnLoadMore","$7483d875cc46523c$var$loading","$7483d875cc46523c$var$nameInput","$7483d875cc46523c$var$searchSelect","style","display","$7483d875cc46523c$var$limit","$7483d875cc46523c$var$offset","$7483d875cc46523c$var$createCharactersList","arr","characters","map","thumbnail","path","extension","$7483d875cc46523c$var$createMarkup","join","hidden","insertAdjacentHTML","addEventListener","e","preventDefault","value","innerHTML","then","result","data","results","length","catch","err","console","error"],"version":3,"file":"characters.94965da9.js.map"}