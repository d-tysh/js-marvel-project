{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAaC,SAASC,cAAc,iBACpCC,EAAmBF,SAASC,cAAc,iBAC1CE,EAAcH,SAASC,cAAc,kBACrCG,EAAUJ,SAASC,cAAc,YAEjCI,EAAaL,SAASC,cAAc,wBACpCK,EAAeN,SAASC,cAAc,mBACtCM,EAAgBP,SAASC,cAAc,qBAE7CE,EAAYK,MAAMC,QAAU,OAE5B,IAAIC,EAAQ,GACRC,EAAS,EA+Db,SAASC,EAAiBC,GACtB,IAAMC,EAASD,EAAIE,KAAI,SAAAC,GACnB,OAXR,SAAsBC,EAAWC,GAC7B,MAAO,kEAE8DC,OAAlDF,EAAUG,KAAO,IAAMH,EAAUI,UAAU,SACjDF,OADwDD,EAAK,sBACxDC,OAALD,EAAK,4B,CAOPI,CADwBN,EAATC,UAAgBD,EAALO,M,IAElCC,KAAK,IAERpB,EAAQqB,QAAS,EACjB1B,EAAW2B,mBAAmB,YAAaZ,GAC3CX,EAAYK,MAAMC,QAAU,O,CApEhCP,EAAiByB,iBAAiB,UAsBlC,SAAwBC,GACpBA,EAAEC,iBACF,IAAMN,EAAQlB,EAAWyB,MACnBC,EAASzB,EAAawB,MACtBE,EAAUzB,EAAcuB,MAE9B,IAAKP,EACD,OAGJxB,EAAWkC,UAAY,GACvB7B,EAAQqB,QAAS,EACjBf,EAAQ,GAERwB,QAAQC,IAAIZ,EAAOQ,EAAQC,EAAStB,EAAOC,IAE3C,EAAAd,EAAAuC,mBAAkBb,EAAOQ,EAAQC,EAAStB,EAAOC,GAC5C0B,MAAK,SAAAC,GACFlC,EAAQqB,QAAS,EACZa,EAAOC,KAAKC,QAAQC,SACrB1C,EAAWkC,UAAa,iGAI5BrB,EAAiB0B,EAAOC,KAAKC,SAC7BrC,EAAYK,MAAMC,QAAU,M,IAE/BiC,OAAM,SAAAC,G,OAAOT,QAAQU,MAAMD,E,OAhDpCxC,EAAYwB,iBAAiB,SAU7B,WACIvB,EAAQqB,QAAS,EACjBd,GAAU,IAEV,EAAAd,EAAAgD,WAAUnC,EAAOC,GACZ0B,MAAK,SAAAC,GAEF,OADA1B,EAAiB0B,EAAOC,KAAKC,SACf7B,C,QAdtB,EAAAd,EAAAgD,WAAUnC,EAAOC,GACZ0B,MAAK,SAAAC,GACF1B,EAAiB0B,EAAOC,KAAKC,Q,IAEhCE,OAAM,SAAAC,G,OAAOT,QAAQU,MAAMD,E","sources":["src/comics.js"],"sourcesContent":["import { getComics, getComicsBySearch } from \"./getResource\";\n\nconst comicsList = document.querySelector('.comics__list');\nconst formComicsFilter = document.querySelector('.comics__form');\nconst btnLoadMore = document.querySelector('.btn-load-more');\nconst loading = document.querySelector('.loading');\n\nconst titleInput = document.querySelector('.comics__input-title');\nconst comicsFormat = document.querySelector('.comics__format');\nconst selectOrderBy = document.querySelector('.comics__order-by');\n\nbtnLoadMore.style.display = 'none';\n\nlet limit = 20;\nlet offset = 0;\n\nformComicsFilter.addEventListener('submit', onSearchComics);\nbtnLoadMore.addEventListener('click', onLoadComics);\n\nfunction getComicsList() {\n    getComics(limit, offset)\n        .then(result => {\n            createComicsList(result.data.results);\n        })\n        .catch(err => console.error(err));\n}\n\nfunction onLoadComics() {\n    loading.hidden = false;\n    offset += 20;\n\n    getComics(limit, offset)\n        .then(result => {\n            createComicsList(result.data.results);\n            return limit, offset;\n        })\n}\n\nfunction onSearchComics(e) {\n    e.preventDefault();\n    const title = titleInput.value;\n    const format = comicsFormat.value;\n    const orderBy = selectOrderBy.value;\n\n    if (!title) {\n        return;\n    }\n    \n    comicsList.innerHTML = '';\n    loading.hidden = false;\n    limit = 50;\n\n    console.log(title, format, orderBy, limit, offset);\n    \n    getComicsBySearch(title, format, orderBy, limit, offset)\n        .then(result => {\n            loading.hidden = true;\n            if (!result.data.results.length) {\n                comicsList.innerHTML = `\n                    <p class='no-data'>Sorry, no data for this query.</p>\n                `;\n            }\n            createComicsList(result.data.results);\n            btnLoadMore.style.display = 'none';\n        })\n        .catch(err => console.error(err));\n}\n\nfunction createMarkup(thumbnail, name) {\n    return `\n        <li class=\"comics__list-item\">\n            <img src=${thumbnail.path + '.' + thumbnail.extension} alt=${name}>\n            <p>${name}</p>\n        </li>\n    `;\n}\n\nfunction createComicsList(arr) {\n    const Comics = arr.map(({ thumbnail, title }) => {\n        return createMarkup(thumbnail, title);\n    }).join('');\n    \n    loading.hidden = true;\n    comicsList.insertAdjacentHTML('beforeend', Comics);\n    btnLoadMore.style.display = 'block';\n}\n\ngetComicsList();"],"names":["$4qBpi","parcelRequire","$f90d9a26534d198a$var$comicsList","document","querySelector","$f90d9a26534d198a$var$formComicsFilter","$f90d9a26534d198a$var$btnLoadMore","$f90d9a26534d198a$var$loading","$f90d9a26534d198a$var$titleInput","$f90d9a26534d198a$var$comicsFormat","$f90d9a26534d198a$var$selectOrderBy","style","display","$f90d9a26534d198a$var$limit","$f90d9a26534d198a$var$offset","$f90d9a26534d198a$var$createComicsList","arr","Comics","map","param","thumbnail","name","concat","path","extension","$f90d9a26534d198a$var$createMarkup","title","join","hidden","insertAdjacentHTML","addEventListener","e","preventDefault","value","format","orderBy","innerHTML","console","log","getComicsBySearch","then","result","data","results","length","catch","err","error","getComics"],"version":3,"file":"comics.49ccb10d.js.map"}