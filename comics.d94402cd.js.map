{"mappings":"AAwBAA,eAAeC,EAAUC,EAAOC,GAC5B,MAAMC,QAAgBC,MAAM,yDAA2BH,YAAgBC,6CAEvE,IAAKC,EAAQE,GACT,MAAM,IAAIC,MAAMH,EAAQI,QAG5B,OAAOJ,EAAQK,M,CAGnBT,eAAeU,EAAkBC,EAAOC,EAAQC,EAASX,EAAOC,GAC5D,MAAMC,QAAgBC,MAAM,0DAA0DO,qBAA0BD,aAAiBE,WAAiBX,YAAgBC,6CAElK,IAAKC,EAAQE,GACT,MAAM,IAAIC,MAAMH,EAAQI,OAAQJ,EAAQU,YAG5C,OAAOV,EAAQK,M,CCvCnB,MAAMM,EAAaC,SAASC,cAAc,iBACpCC,EAAmBF,SAASC,cAAc,iBAC1CE,EAAcH,SAASC,cAAc,kBACrCG,EAAUJ,SAASC,cAAc,YAEjCI,EAAaL,SAASC,cAAc,wBACpCK,EAAeN,SAASC,cAAc,mBACtCM,EAAgBP,SAASC,cAAc,qBAE7CE,EAAYK,MAAMC,QAAU,OAE5B,IAAIC,EAAQ,GACRC,EAAS,EA+Db,SAASC,EAAiBC,GACtB,MAAMC,EAASD,EAAIE,KAAI,EAACC,UAAEA,EAASrB,MAAEA,KAVzC,SAAsBqB,EAAWC,GAC7B,MAAO,kEAEYD,EAAUE,KAAO,IAAMF,EAAUG,iBAAiBF,sBACxDA,4B,CAOFG,CAAaJ,EAAWrB,KAChC0B,KAAK,IAERjB,EAAQkB,QAAS,EACjBvB,EAAWwB,mBAAmB,YAAaT,GAC3CX,EAAYK,MAAMC,QAAU,O,CApEhCP,EAAiBsB,iBAAiB,UAsBlC,SAAwBC,GACpBA,EAAEC,iBACF,MAAM/B,EAAQU,EAAWsB,MACnB/B,EAASU,EAAaqB,MACtB9B,EAAUU,EAAcoB,MAE9B,IAAKhC,EACD,OAGJI,EAAW6B,UAAY,GACvBxB,EAAQkB,QAAS,EACjBZ,EAAQ,GAERmB,QAAQC,IAAInC,EAAOC,EAAQC,EAASa,EAAOC,GAE3CjB,EAAkBC,EAAOC,EAAQC,EAASa,EAAOC,GAC5CoB,MAAKC,IACF5B,EAAQkB,QAAS,EACZU,EAAOC,KAAKC,QAAQC,SACrBpC,EAAW6B,UAAY,iGAI3BhB,EAAiBoB,EAAOC,KAAKC,SAC7B/B,EAAYK,MAAMC,QAAU,MAAM,IAErC2B,OAAMC,GAAOR,QAAQS,MAAMD,I,IAhDpClC,EAAYqB,iBAAiB,SAU7B,WACIpB,EAAQkB,QAAS,EACjBX,GAAU,GAEV1B,EAAUyB,EAAOC,GACZoB,MAAKC,IACFpB,EAAiBoB,EAAOC,KAAKC,SACfvB,I,IAdtB1B,EAAUyB,EAAOC,GACZoB,MAAKC,IACFpB,EAAiBoB,EAAOC,KAAKC,QAAQ,IAExCE,OAAMC,GAAOR,QAAQS,MAAMD","sources":["src/getResource.js","src/comics.js"],"sourcesContent":["const BASE_URL = 'https://gateway.marvel.com:443/v1/public/';\nconst API_PUBLIC_KEY = 'a85ca2e1a3f06b7ee3183f960e5fdc88';\n\nasync function getCharacters(limit, offset) {\n\n    const request = await fetch(`${BASE_URL}characters?limit=${limit}&offset=${offset}&apikey=${API_PUBLIC_KEY}`);\n    \n    if (!request.ok) {\n        throw new Error(request.status);\n    }\n\n    return request.json();\n}\n\nasync function getCharactersBySearch(name, orderBy, limit, offset) {\n    const request = await fetch(`${BASE_URL}characters?nameStartsWith=${name}&orderBy=${orderBy}&limit=${limit}&offset=${offset}&apikey=${API_PUBLIC_KEY}`);\n    \n    if (!request.ok) {\n        throw new Error(request.status);\n    }\n\n    return request.json();\n}\n\nasync function getComics(limit, offset) {\n    const request = await fetch(`${BASE_URL}comics?limit=${limit}&offset=${offset}&apikey=${API_PUBLIC_KEY}`);\n    \n    if (!request.ok) {\n        throw new Error(request.status);\n    }\n\n    return request.json();\n}\n\nasync function getComicsBySearch(title, format, orderBy, limit, offset) {\n    const request = await fetch(`https://gateway.marvel.com:443/v1/public/comics?format=${format}&titleStartsWith=${title}&orderBy=${orderBy}&limit=${limit}&offset=${offset}&apikey=${API_PUBLIC_KEY}`);\n\n    if (!request.ok) {\n        throw new Error(request.status, request.statusText);\n    }\n\n    return request.json();\n}\n\nexport {getCharacters, getCharactersBySearch, getComics, getComicsBySearch};","import { getComics, getComicsBySearch } from \"./getResource\";\n\nconst comicsList = document.querySelector('.comics__list');\nconst formComicsFilter = document.querySelector('.comics__form');\nconst btnLoadMore = document.querySelector('.btn-load-more');\nconst loading = document.querySelector('.loading');\n\nconst titleInput = document.querySelector('.comics__input-title');\nconst comicsFormat = document.querySelector('.comics__format');\nconst selectOrderBy = document.querySelector('.comics__order-by');\n\nbtnLoadMore.style.display = 'none';\n\nlet limit = 20;\nlet offset = 0;\n\nformComicsFilter.addEventListener('submit', onSearchComics);\nbtnLoadMore.addEventListener('click', onLoadComics);\n\nfunction getComicsList() {\n    getComics(limit, offset)\n        .then(result => {\n            createComicsList(result.data.results);\n        })\n        .catch(err => console.error(err));\n}\n\nfunction onLoadComics() {\n    loading.hidden = false;\n    offset += 20;\n\n    getComics(limit, offset)\n        .then(result => {\n            createComicsList(result.data.results);\n            return limit, offset;\n        })\n}\n\nfunction onSearchComics(e) {\n    e.preventDefault();\n    const title = titleInput.value;\n    const format = comicsFormat.value;\n    const orderBy = selectOrderBy.value;\n\n    if (!title) {\n        return;\n    }\n    \n    comicsList.innerHTML = '';\n    loading.hidden = false;\n    limit = 50;\n\n    console.log(title, format, orderBy, limit, offset);\n    \n    getComicsBySearch(title, format, orderBy, limit, offset)\n        .then(result => {\n            loading.hidden = true;\n            if (!result.data.results.length) {\n                comicsList.innerHTML = `\n                    <p class='no-data'>Sorry, no data for this query.</p>\n                `;\n            }\n            createComicsList(result.data.results);\n            btnLoadMore.style.display = 'none';\n        })\n        .catch(err => console.error(err));\n}\n\nfunction createMarkup(thumbnail, name) {\n    return `\n        <li class=\"comics__list-item\">\n            <img src=${thumbnail.path + '.' + thumbnail.extension} alt=${name}>\n            <p>${name}</p>\n        </li>\n    `;\n}\n\nfunction createComicsList(arr) {\n    const Comics = arr.map(({ thumbnail, title }) => {\n        return createMarkup(thumbnail, title);\n    }).join('');\n    \n    loading.hidden = true;\n    comicsList.insertAdjacentHTML('beforeend', Comics);\n    btnLoadMore.style.display = 'block';\n}\n\ngetComicsList();"],"names":["async","$88749f7ae1b7386d$export$5b02ac6bca52738d","limit","offset","request","fetch","ok","Error","status","json","$88749f7ae1b7386d$export$11db466317448c9a","title","format","orderBy","statusText","$752a6ea7e1e26a36$var$comicsList","document","querySelector","$752a6ea7e1e26a36$var$formComicsFilter","$752a6ea7e1e26a36$var$btnLoadMore","$752a6ea7e1e26a36$var$loading","$752a6ea7e1e26a36$var$titleInput","$752a6ea7e1e26a36$var$comicsFormat","$752a6ea7e1e26a36$var$selectOrderBy","style","display","$752a6ea7e1e26a36$var$limit","$752a6ea7e1e26a36$var$offset","$752a6ea7e1e26a36$var$createComicsList","arr","Comics","map","thumbnail","name","path","extension","$752a6ea7e1e26a36$var$createMarkup","join","hidden","insertAdjacentHTML","addEventListener","e","preventDefault","value","innerHTML","console","log","then","result","data","results","length","catch","err","error"],"version":3,"file":"comics.d94402cd.js.map"}